<page-header heading="Transactions" sub-heading="Manage" button-list="vm.headerAnchor"></page-header>
<filter-bar date-picker-needed="true"
       buyer="true" seller="true" product="true" tran-status="true">
</filter-bar>
<page-blue-container>
    <div class="dg-tablePanelHead clearfix">
        <div class="dg-tablePanelTitle">Transactions (Standard)<br><small>Total {{vm.allTransactions.length}} Transactions</small></div>
        <div class="pull-right cursor-pointer" ng-click="vm.getTradeBookExcel(vm.transactionTableHeadings,vm.allTransactions)">
            <label class="cursor-pointer excelExport">
                <i class="fa fa-file-excel-o greenFont"></i>&nbsp;&nbsp;Export to Excel
            </label>
        </div>
    </div>

    <div class="dg-tablePanelBody">
        <table ng-if="(vm.allTransactions.length >  0)" class="table table-bordered dg-table">
            <thead>
            <tr>
                <th ng-repeat="heading in vm.transactionTableHeadings" ng-bind="heading"></th>
            </tr>
            </thead>
            <tbody>
                <tr ng-repeat="row in vm.allTransactions | filter:vm.searchTransaction">
                    <td ng-bind="row.transactionDate| date:'dd/MM/yyyy'"></td>
                    <td><a ui-sref="shell.tradebook.Transaction({tran:row.tr_transactionID})">{{row.fileNo}}</a></td>
                    <td><a ui-sref="shell.businessPartner.view({id:row.tr_bpBuyerID})">{{row.buyer}}</a></td>
                    <td><a ui-sref="shell.products.viewProduct({id:row.tr_productID})">{{row.product}}</a></td>
                    <td ng-bind="row.quantity"></td>
                    <td ng-bind="row.rate  | currency:'$':0"></td>
                    <td><a ui-sref="shell.businessPartner.view({id:row.tr_productID})">{{row.seller}}</a></td>
                    <td ng-bind="row.origin"></td>
                    <td ng-if="row.shipment_start === null">Not Entered</td>
                    <td ng-if="row.shipment_start !== null" ng-bind="row.shipment_start | date:'dd/MM/yyyy'"></td>
                    <td ng-if="row.shipment_end === null">Not Entered</td>
                    <td ng-if="row.shipment_end !== null" ng-bind="row.shipment_end | date:'dd/MM/yyyy'"></td>
                    <td ng-bind="row.commission"></td>
                </tr>
            </tbody>
        </table>

    </div>
</page-blue-container>
